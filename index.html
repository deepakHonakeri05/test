<!doctype html><html lang="en"><head><meta charset="utf-8"/><link rel="icon" href="/test/icon.png"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="theme-color" content="#000000"/><meta name="description" content="Simple messages reading app"/><link rel="apple-touch-icon" href="/test/icon.png"/><link rel="manifest" href="/test/manifest.json"/><title>Messages App</title><script defer="defer" src="/test/static/js/main.df8cf528.js"></script><link href="/test/static/css/main.15b9f58a.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"></div><script>if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('worker.js').then(function(registration) {
            console.log('Worker registration successful', registration.scope);
          }, function(err) {
            console.log('Worker registration failed', err);
          }).catch(function(err) {
            console.log(err);
          });
        });
      } else {
        console.log('Service Worker is not supported by browser.');
      }

      function handleNotification(){
        console.log("Notification permission granted. Requesting for token.");
        let token = await messaging.getToken({
          vapidKey: "BGpSx8A8H1GIYNjCCRE5YhFp32AaYbuDkejYZF_qQJKTNRbVYjLcsS5CHybsrfNTRvsZ9yrg8TXpkJM6BedI8yE",
        });
          // do something with the FCM token
          const notification = new Notification("Name", { body: "Message", icon: "/public/icon.png" });
      }


      if(Notification.permission === "granted"){
          handleNotification();
      }

      let permission = await Notification.requestPermission();
      if (permission === "granted") {
          handleNotification();
      } else {
        console.log("Notification permission denied");
          // Handle denied permission
      }</script></body></html>